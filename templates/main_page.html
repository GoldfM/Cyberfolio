{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'css/general_styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/main_page.css' %}">
    <link href = "{% static 'fonts/stylesheet.css' %}" rel = "stylesheet" type = "text/css" />
{% endblock %}

{% block content %}



<div class="search_container">
            <div class="search_header">
                Давайте вдохновимся
            </div>
            <div class="search_info">
                <div class="search_form">
                    <div class="input-heading">Имя</div>
                    <input required type="text" name="first-name" placeholder="Иван" class="input search_input">
                    <div class="input-heading">Фамилия</div>
                    <input required type="text" name="last-name" placeholder="Иванов" class="input search_input">
                    <div class="input-heading">Специализация</div>
                    <input required type="text" name="specialization" placeholder="Указать род деятельности" class="input search_input">
                    <div class="search_button-container">
                        <input type="submit" value="Поиск" class="usual-button search_button">
                    </div>
                </div>
                <div>
                    <img class="search_img" src="{% static 'images/mainpage_img.png' %}">
                </div>
            </div>
        </div>
<div class="users">
{% for u in users %}
    <div class="user-card-container">
            <div class="left-section card-container">
                <div class="user-header">{{ u.get_short_name }}</div>
                <p class="user-text">{{ user.descriptions }}</p>
                <div class="user-statistic-header">Статистика</div>
                <div class="statistic-container">
                    <ul class="statistic-list">
                        <li class="statistic-item">{{ user.count_projects }} проекта</li>
                        <li class="statistic-item">{{ user.count_followers }} подписок</li>
                        <li class="statistic-item">{{ user.count_followings }} подписчиков</li>
                    </ul>
                    <a class="project-link">
                        <h5 class="abour-project">Подробнее</h5>
                        <img class="abour-project-icon" src="{% static 'images/about-project-icon.svg' %}">
                    </a>
                    {% if not is_your_profile %}
                    <div class="second-colum">
                        <button class="usual-button submit-button subscribe" data-subscribe="no">Подписаться</button>
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="right-section card-container">
                <img src="{{ u.photo }}" alt="" class="avatar">
            </div>
        </div>
{% endfor %}
</div>
<script>
    document.querySelector('.users').addEventListener('click', event => {
    if (event.target.classList.contains('subscribe')){
        event.target.innerHTML = "Отписаться";
        event.target.classList.remove('subscribe');
        event.target.classList.add('unsubscribe');
        event.target.dataset.subscribe = 'yes';
    }
    else if(event.target.classList.contains('unsubscribe')){
        event.target.innerHTML = "Подписаться";
        event.target.classList.remove('unsubscribe');
        event.target.classList.add('subscribe');
        event.target.dataset.subscribe = 'no';
    }
});
</script>


{% endblock %}
